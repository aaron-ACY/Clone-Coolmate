<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InFo</title>
    <link rel="icon" href="./assets/img/favicon.ico" sizes="48x48" type="image/x-icon">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v7.0.1/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/css/reset.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/info.css">
    <link rel="stylesheet" href="./assets/css/responsive.css">
</head>

<body>
    <div id="header-placeholder"></div>

    <div class="account-layout">
        <div class="account-layout__container">

            <aside class="sidebar">
                <ul class="sidebar__menu">
                    <li class="sidebar__item sidebar__item--active">
                        <a href="#" class="sidebar__link">
                            <div class="sidebar__left">
                                <span class="sidebar__icon"><i class="fa-solid fa-user"></i></span>
                                <span class="sidebar__text">Thông tin tài khoản</span>
                            </div>
                            <i class="fa-solid fa-arrow-right sidebar__arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link">
                            <div class="sidebar__left">
                                <span class="sidebar__icon"><i class="fa-solid fa-user-plus"></i></span>
                                <span class="sidebar__text">Giới thiệu bạn bè</span>
                            </div>
                            <i class="fa-solid fa-arrow-right sidebar__arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link">
                            <div class="sidebar__left">
                                <span class="sidebar__icon"><i class="fa-solid fa-box-open"></i></span>
                                <span class="sidebar__text">Lịch sử đơn hàng</span>
                            </div>
                            <i class="fa-solid fa-arrow-right sidebar__arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link">
                            <div class="sidebar__left">
                                <span class="sidebar__icon"><i class="fa-solid fa-ticket"></i></span>
                                <span class="sidebar__text">Ví Voucher</span>
                            </div>
                            <i class="fa-solid fa-arrow-right sidebar__arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link">
                            <div class="sidebar__left">
                                <span class="sidebar__icon"><i class="fa-solid fa-map-location-dot"></i></span>
                                <span class="sidebar__text">Sổ địa chỉ</span>
                            </div>
                            <i class="fa-solid fa-arrow-right sidebar__arrow"></i>
                        </a>
                    </li>
                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link">
                            <div class="sidebar__left">
                                <span class="sidebar__icon"><i class="fa-solid fa-star"></i></span>
                                <span class="sidebar__text">Đánh giá và phản hồi</span>
                            </div>
                            <i class="fa-solid fa-arrow-right sidebar__arrow"></i>
                        </a>
                    </li>

                    <li class="sidebar__item">
                        <a href="#" class="sidebar__link" id="btn-logout">
                            <div class="sidebar__left">
                                <span class="sidebar__icon"><i class="fa-solid fa-power-off"></i></span>
                                <span class="sidebar__text">Đăng xuất</span>
                            </div>
                            <i class="fa-solid fa-arrow-right sidebar__arrow"></i>
                        </a>
                    </li>
                </ul>
            </aside>

            <main class="profile-info">
                <div class="mobile-back-btn" id="mobile-back-btn">
                    <i class="fa-solid fa-arrow-left"></i> Quay lại Menu
                </div>
                <section class="profile-info__section">
                    <h1 class="profile-info__title">Thông tin tài khoản</h1>

                    <div class="info-list">
                        <div class="info-list__row">
                            <div class="info-list__label">Họ và tên</div>
                            <div class="info-list__value" id="info-name">Chưa cập nhật</div>
                        </div>
                        <div class="info-list__row">
                            <div class="info-list__label">Số điện thoại</div>
                            <div class="info-list__value" id="info-phone">Chưa cập nhật</div>
                        </div>
                        <div class="info-list__row">
                            <div class="info-list__label">Giới tính</div>
                            <div class="info-list__value">Nam</div>
                        </div>
                        <div class="info-list__row">
                            <div class="info-list__label">Ngày sinh</div>
                            <div class="info-list__value">--/--/----</div>
                        </div>
                        <div class="info-list__row">
                            <div class="info-list__label">Chiều cao</div>
                            <div class="info-list__value">--- cm</div>
                        </div>
                        <div class="info-list__row">
                            <div class="info-list__label">Cân nặng</div>
                            <div class="info-list__value">--- kg</div>
                        </div>
                    </div>

                    <button class="btn btn--outline">CẬP NHẬT</button>
                </section>

                <section class="profile-info__section">
                    <h2 class="profile-info__subtitle">Thông tin đăng nhập</h2>

                    <div class="info-list">
                        <div class="info-list__row">
                            <div class="info-list__label">Email</div>
                            <div class="info-list__value" id="info-email">Chưa cập nhật</div>
                        </div>
                        <div class="info-list__row">
                            <div class="info-list__label">Mật khẩu</div>
                            <div class="info-list__value">••••••••</div>
                        </div>
                    </div>

                    <button class="btn btn--outline">CẬP NHẬT</button>
                </section>
            </main>

        </div>
    </div>

    <div id="footer-placeholder"></div>

    <div id="toast-container"></div>

    <script src="./assets/js/components.js"></script>
    <script src="./assets/js/auth.js"></script>
    <script src="./assets/js/script.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 1. Đồng bộ thông tin từ LocalStorage
            const storedUser = localStorage.getItem('user_account');

            if (storedUser) {
                const userData = JSON.parse(storedUser);

                const nameEl = document.getElementById('info-name');
                const phoneEl = document.getElementById('info-phone');
                const emailEl = document.getElementById('info-email');

                if (nameEl && userData.name) nameEl.textContent = userData.name;
                if (phoneEl && userData.phone) phoneEl.textContent = userData.phone;
                if (emailEl && userData.email) emailEl.textContent = userData.email;
            }

            // 2. Xử lý nút Đăng xuất (SIDEBAR)
            const btnLogout = document.getElementById('btn-logout');
            if (btnLogout) {
                btnLogout.addEventListener('click', function (e) {
                    e.preventDefault();

                    const confirmLogout = confirm("Bạn có chắc chắn muốn đăng xuất? Hành động này sẽ xóa toàn bộ dữ liệu (giỏ hàng, tài khoản).");
                    if (confirmLogout) {
                        // === LỆNH QUAN TRỌNG: Xóa sạch LocalStorage ===
                        localStorage.clear();

                        alert("Đăng xuất thành công! Dữ liệu đã được xóa.");

                        // Chuyển hướng về trang chủ
                        window.location.href = 'index.html';
                    }
                });
            }
        });
    </script>

</body>

</html>